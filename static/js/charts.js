var labl = ["0:00", "", "", "", "",
"0:15", "", "", "", "",
"0:30", "", "", "", "",
"0:45", "", "", "", "",
"1:00", "", "", "", "",
"1:15", "", "", "", "",
"1:30", "", "", "", "",
"1:45", "", "", "", "",
"2:00", "", "", "", "",
"2:15", "", "", "", "",
"2:30", "", "", "", "",
"2:45", "", "", "", "",
"3:00", "", "", "", "",
"3:15", "", "", "", "",
"3:30"
];
var res;

 Papa.parse("/book2.csv", {
	download: true,
	complete: function (results) {
		console.log(results);
		res = results;
        try{
		genCharts();
        } catch(err){
        alert("Unable to generate charts! Check csv file for errors!");
        }
	}
});   


var OPTIONS = {
	scales: {
		yAxes: [{
			ticks: {
				beginAtZero: false
			}
					}]
	},
	elements: {
		point: {
			radius: 0
		}
	}
};

var data_line1 = [30, 30, 30, 30.10000038, 30, 30, 30, 29.89999962, 29.89999962, 29.89999962, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 30.10000038, 30.10000038, 30, 30, 29.89999962, 29.89999962, 30, 29.89999962, 30, 30, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 29.79999924, 29.79999924, 29.79999924, 29.89999962, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.70000076, 29.79999924, 29.79999924, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 30, 29.89999962, 30.10000038, 30.10000038, 30, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.20000076, 30.20000076, 30.29999924, 30.29999924, 30.29999924, 30.29999924, 30.20000076, 30.29999924, 30.29999924, 30.29999924, 30.20000076, 30.29999924, 30.29999924, 30.29999924, 30.29999924, 30.29999924, 30.39999962, 30.39999962, 30.39999962, 30.39999962, 30.39999962, 30.5, 30.5, 30.5, 30.60000038, 30.5, 30.5, 30.60000038, 30.60000038, 30.60000038, 30.5, 30.60000038, 30.60000038, 30.60000038, 30.60000038, 30.60000038, 30.60000038, 30.5, 30.5, 30.60000038, 30.5, 30.5, 30.60000038, 30.60000038, 30.70000076, 30.60000038, 30.60000038, 30.60000038, 30.70000076, 30.60000038, 30.70000076, 30.70000076, 30.60000038, 30.60000038, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.60000038, 30.70000076, 30.70000076, 30.60000038, 30.60000038, 30.60000038, 30.5, 30.60000038, 30.5, 30.5, 30.39999962, 30.39999962
];


var ctx = document.getElementById("myLine1");
var myChart1 = new Chart(ctx, {
	type: 'line',
	data: {
		labels: labl,
		datasets: [{
			label: 'Technical Feasibility',
			data: data_line1,
			backgroundColor: [
						'rgba(255, 99, 132, 0.2)'
					],
			borderColor: [
						'rgba(255,99,132,1)'
					],
			borderWidth: 2
				}]
	},
	options: OPTIONS
});
//radar graph
var ctx = document.getElementById("myLine2");
var myChart2 = new Chart(ctx, {
	type: 'line',
	data: {
		labels: labl,
		datasets: [{
			label: 'UWG_P_Masse_Anfahrventil_IST_',
			data: [45.45351791, 45.03459167, 45.2440567, 45.08695984, 45.19169235, 45.03459167, 43.83018112, 44.92985916, 44.51093674, 44.92985916, 45.19169235, 45.40115356, 45.2440567, 45.139328, 44.6680336, 44.98222733, 45.08695984, 44.6680336, 45.34878922, 45.40115356, 45.40115356, 45.82008362, 45.139328, 46.18664169, 44.6680336, 45.34878922, 45.34878922, 45.66298294, 45.40115356, 45.08695984, 45.76771164, 45.34878922, 45.34878922, 45.66298294, 45.61061478, 45.61061478, 45.29642487, 45.40115356, 45.40115356, 45.19169235, 45.61061478, 45.66298294, 45.139328, 45.50588608, 45.45351791, 45.71534729, 45.97718048, 45.71534729, 45.61061478, 44.87749481, 45.45351791, 44.82513046, 45.61061478, 45.97718048, 45.45351791, 44.82513046, 45.34878922, 45.34878922, 45.50588608, 45.40115356, 45.08695984, 45.03459167, 45.66298294, 45.45351791, 45.34878922, 44.72039795, 45.29642487, 45.66298294, 43.51598358, 45.55825043, 45.08695984, 43.98727798, 44.45857239, 45.34878922, 44.72039795, 45.19169235, 43.88254547, 45.08695984, 43.51598358, 45.139328, 44.92985916, 45.139328, 45.45351791, 45.139328, 44.98222733, 45.40115356, 45.66298294, 45.139328, 44.92985916, 45.29642487, 45.34878922, 45.34878922, 45.19169235, 45.29642487, 44.98222733, 45.50588608, 44.45857239, 45.55825043, 45.45351791, 45.50588608, 45.55825043, 45.55825043, 45.71534729, 45.34878922, 45.40115356, 44.51093674, 45.03459167, 44.87749481, 45.08695984, 44.98222733, 45.66298294, 45.45351791, 45.61061478, 45.40115356, 45.2440567, 45.61061478, 44.87749481, 44.87749481, 44.98222733, 45.40115356, 44.92985916, 45.61061478, 45.61061478, 45.40115356, 45.34878922, 45.45351791, 45.71534729, 45.50588608, 45.66298294, 45.50588608, 45.61061478, 45.2440567, 45.08695984, 44.82513046, 45.29642487, 45.40115356, 45.61061478, 45.92481232, 45.139328, 45.139328, 45.76771164, 44.6680336, 45.34878922, 45.40115356, 45.55825043, 45.03459167],
			backgroundColor: [
						'rgba(255, 99, 132, 0.7)'

					],

			borderWidth: 2
				}, {
			label: 'UWG_F_Wasser_IST_Durchfluss',
			data: [29.56163025, 30.99971008, 19.85966301, 28.07291603, 33.64293671, 22.35098267, 20.9432869, 20.28501129, 21.68258095, 19.24189758, 25.97656059, 25.85503387, 30.05786896, 33.9670105, 35.48611069, 30.62499809, 31.16174698, 29.79455948, 23.75868034, 34.05815887, 24.10300827, 26.92852974, 34.31134033, 24.16377258, 33.44039154, 30.67563438, 21.46990585, 30.49334335, 34.46324921, 34.39236069, 30.71614456, 33.43026352, 33.8049736, 33.64293671, 35.2734375, 35.334198, 26.10821724, 18.09751129, 22.81683922, 28.15393448, 22.11805534, 35.29368973, 29.23755646, 19.94068146, 20.02169991, 18.93807793, 24.2245369, 33.91637421, 31.0098362, 18.72540474, 21.58130646, 22.97887611, 34.48350525, 30.78703499, 17.51012611, 21.91550827, 31.44531059, 34.73668671, 20.05208206, 21.46990585, 24.94357491, 33.49102783, 34.46324921, 27.22222137, 34.81770706, 25.39930534, 19.93055534, 23.32320404, 33.18721008, 35.14178085, 29.60214043, 19.51533508, 21.96614456, 22.43200111, 20.36602974, 20.90277672, 27.71846008, 24.07262611, 35.1620369, 34.3417244, 34.92910767, 24.23466301, 20.49768448, 28.42737198, 25.22714043, 29.61226654, 34.27083206, 21.7129612, 19.90017319, 21.63194275, 27.63744164, 34.240448, 19.42418861, 20.49768448, 27.31336594, 35.23292542, 30.97945404, 35.01012421, 24.14351654, 24.66001129, 25.82465172, 34.43286896, 32.83275223, 33.76446533, 32.80237198, 18.44183922, 19.34317017, 22.39149284, 22.88772964, 34.0784111, 34.91897964, 33.76446533, 28.07291603, 21.89525414, 19.07986069, 22.24971008, 25.78414154, 26.75636482, 28.74131775, 28.6602993, 28.76157188, 29.59201241, 34.02777481, 34.76707077, 34.82783508, 33.41001129, 33.78472137, 32.48842621, 35.2734375, 34.66579819, 32.11371231, 24.77140999, 26.21961784, 23.22193146, 18.78616905, 19.76851845, 24.62962914, 33.39988327, 33.41001129, 33.27835464, 35.1620369, 30.7363987, 31.58709335, 25.77401543, 18.55323982, 23.79918861],
			backgroundColor: [
						'rgba(129, 99, 255, 0.7)'

					],

			borderWidth: 2
				}]
	},
	options: OPTIONS
});
//radar graph
/*var ctx = document.getElementById("myLine3");
var myChart3 = new Chart(ctx, {
	type: 'line',
	data: {
		labels: labl.slice(0, labl.length / 3),
		datasets: [{
			label: 'UWG_T_Wasser_IST_Temp',
			data: [30, 30, 30, 30.10000038, 30, 30, 30, 29.89999962, 29.89999962, 29.89999962, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 30.10000038, 30.10000038, 30, 30, 29.89999962, 29.89999962, 30, 29.89999962, 30, 30, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 29.79999924, 29.79999924, 29.79999924, 29.89999962, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.79999924, 29.70000076, 29.79999924, 29.79999924, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 29.89999962, 30, 29.89999962, 30.10000038, 30.10000038, 30, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.10000038, 30.20000076, 30.20000076, 30.29999924, 30.29999924, 30.29999924, 30.29999924, 30.20000076, 30.29999924, 30.29999924, 30.29999924, 30.20000076, 30.29999924, 30.29999924, 30.29999924, 30.29999924, 30.29999924, 30.39999962, 30.39999962, 30.39999962, 30.39999962, 30.39999962, 30.5, 30.5, 30.5, 30.60000038, 30.5, 30.5, 30.60000038, 30.60000038, 30.60000038, 30.5, 30.60000038, 30.60000038, 30.60000038, 30.60000038, 30.60000038, 30.60000038, 30.5, 30.5, 30.60000038, 30.5, 30.5, 30.60000038, 30.60000038, 30.70000076, 30.60000038, 30.60000038, 30.60000038, 30.70000076, 30.60000038, 30.70000076, 30.70000076, 30.60000038, 30.60000038, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.70000076, 30.60000038, 30.70000076, 30.70000076, 30.60000038, 30.60000038, 30.60000038, 30.5, 30.60000038, 30.5, 30.5, 30.39999962, 30.39999962
],
			backgroundColor: [
						'rgba(153, 102, 255, 0.2)'
					],
			borderColor: [
						'rgba(153, 102, 255, 1)'
					],
			borderWidth: 2
				}, {
			label: 'UWG_T_Wasser_IST_Temp_Tank',
			data: [35.90000153, 35.90000153, 35.90000153, 35.90000153, 35.90000153, 35.79999924, 35.79999924, 35.90000153, 35.79999924, 35.79999924, 35.79999924, 35.70000076, 35.59999847, 35.70000076, 35.70000076, 35.5, 35.5, 35.5, 35.5, 35.40000153, 35.40000153, 35.40000153, 35.40000153, 35.5, 35.59999847, 35.5, 35.5, 35.5, 35.5, 35.5, 35.59999847, 35.5, 35.5, 35.5, 35.5, 35.5, 35.5, 35.59999847, 35.59999847, 35.79999924, 35.70000076, 35.70000076, 35.59999847, 35.70000076, 35.70000076, 35.79999924, 35.90000153, 35.79999924, 35.70000076, 35.79999924, 35.70000076, 35.79999924, 35.70000076, 35.70000076, 35.70000076, 35.90000153, 35.79999924, 35.79999924, 35.79999924, 35.90000153, 35.90000153, 35.90000153, 35.90000153, 36.09999847, 36, 36, 35.90000153, 36, 36, 36, 36.09999847, 36.20000076, 36.20000076, 36.09999847, 36.29999924, 36.09999847, 36.20000076, 36.29999924, 36.09999847, 36.09999847, 36.09999847, 36, 36.09999847, 36.09999847, 36.20000076, 36.20000076, 36.29999924, 36.29999924, 36.29999924, 36.20000076, 36.20000076, 36.29999924, 36.29999924, 36.29999924, 36.40000153, 36.40000153, 36.40000153, 36.40000153, 36.59999847, 36.40000153, 36.40000153, 36.40000153, 36.40000153, 36.40000153, 36.59999847, 36.40000153, 36.59999847, 36.59999847, 36.40000153, 36.29999924, 36.40000153, 36.40000153, 36.40000153, 36.40000153, 36.40000153, 36.59999847, 36.59999847, 36.40000153, 36.59999847, 36.40000153, 36.40000153, 36.40000153, 36.59999847, 36.40000153, 36.40000153, 36.40000153, 36.59999847, 36.40000153, 36.40000153, 36.40000153, 36.40000153, 36.59999847, 36.59999847, 36.59999847, 36.59999847, 36.59999847, 36.40000153, 36.40000153, 36.40000153, 36.29999924, 36.29999924, 36.29999924, 36.29999924, 36.29999924, 36.29999924, 36.40000153
],
			backgroundColor: [
						'rgba(75, 192, 192, 0.2)'
					],
			borderColor: [
						'rgba(75, 192, 192, 1)'
					],
			borderWidth: 2
				}]
	},
	options: OPTIONS
});*/

/*var ctx = document.getElementById("barRecept");
var dataBar = {
	labels: ["42-42", "43-43", "44-44"],
	datasets: [{
		label: ' ',
		backgroundColor: 'rgba(75, 192, 192, 0.2)',
		data: [1200.758789, 1200.688477, 1200.855713]
		}]


};
var myBarChart = new Chart(ctx, {
	type: 'bar',
	data: dataBar,
	options: {
		scales: {
			yAxes: [{
				ticks: {
					beginAtZero: false
				}
					}]
		},
		elements: {
			point: {
				radius: 0
			}
		}
	}
});*/




function genData(data) {
	myDat = {
		backgroundColor: randomColor(),
		data: data
	}
	return myDat;
}

function genCard(id, title, text, type, labels, dataset) {
	$("#append").append('<div class="col s12 m6 l6" id="recept-c"> <div class = "card z-depth-4" ><div class = "card-image" ><canvas id ="' + id + '" height="300"  class="white"> </canvas> </div> <div class = "card-content" ><span class = "card-title" >' + title + '</span> <p>' + text + '</p> </div> </div> </div>');
	var ctx = document.getElementById(id);

	var myBarChart = new Chart(ctx, {
		type: type,
		data: dataset,
		options: OPTIONS
	});
}


function genCharts() {
	for (var i = 0; i < res.data.length; i++) {
		var id = res.data[i][0];
		var title = res.data[i][1];
		var text = res.data[i][2];
		var type = res.data[i][3];
		var charts = res.data[i][4];
		for (var j = 0; j < res.data[i + 1].length; j++) {
			if (j % 4 !== 0) res.data[i + 1][j] = ""
		}
		var labels = res.data[i + 1];
		var mydata = res.data[i + 2];
		var dataBar = {
			labels: labels,
			datasets: [{
				label: '',
				backgroundColor: randomColor(),
				data: mydata
		}]
		};



		if (charts > 1) {

			for (var n = 1; n < charts; n++) {
				dataBar.datasets.push(genData(res.data[i + 2 + n]));
			}
			genCard(id, title, text, type, labels, dataBar);
			i += 3 + (charts - 1);
		} else {
			genCard(id, title, text, type, labels, dataBar);
			i += 3;
		}
	}

}
var t = setInterval(runFunction, 1000);

function runFunction() {
	data_line1.push(data_line1.shift())
	myChart2.data.datasets[0].data.push(myChart2.data.datasets[0].data.shift());
	myChart2.data.datasets[1].data.push(myChart2.data.datasets[1].data.shift());
	//	myChart3.data.datasets[0].data.push(myChart3.data.datasets[0].data.shift());
	//	myChart3.data.datasets[1].data.push(myChart3.data.datasets[1].data.shift());
	myChart1.update();
	myChart2.update();
	//	myChart3.update();
}
